<?phpif (!defined('AURACMS_admin')) {	Header("Location: ../../../index.php");	exit;}if (!cek_login ()){   $admin .='<p class="judul">Access Denied !!!!!!</p>';   exit;}$style_include[] .= '<link rel="stylesheet" media="screen" href="mod/calendar/css/dynCalendar.css" />';$admin .= '<script language="javascript" type="text/javascript" src="mod/calendar/js/browserSniffer.js"></script><script language="javascript" type="text/javascript" src="mod/calendar/js/dynCalendar.js"></script>';$tanggallahir = <<<eof<script language="JavaScript" type="text/javascript">        /**    * Example callback function    */    /*<![CDATA[*/    function exampleCallback_ISO3(date, month, year)    {        if (String(month).length == 1) {            month = '0' + month;        }            if (String(date).length == 1) {            date = '0' + date;        }            document.forms['posts'].tgllahir.value = year + '-' + month + '-' + date;    }    calendar3 = new dynCalendar('calendar3', 'exampleCallback_ISO3');    calendar3.setMonthCombo(true);    calendar3.setYearCombo(true);/*]]>*/     </script>eof;$tanggalditerima = <<<eof<script language="JavaScript" type="text/javascript">        /**    * Example callback function    */    /*<![CDATA[*/    function exampleCallback_ISO2(date, month, year)    {        if (String(month).length == 1) {            month = '0' + month;        }            if (String(date).length == 1) {            date = '0' + date;        }            document.forms['posts'].tglditerima.value = year + '-' + month + '-' + date;    }    calendar2 = new dynCalendar('calendar2', 'exampleCallback_ISO2');    calendar2.setMonthCombo(true);    calendar2.setYearCombo(true);/*]]>*/     </script>eof;$tanggalpercobaan = <<<eof<script language="JavaScript" type="text/javascript">        /**    * Example callback function    */    /*<![CDATA[*/    function exampleCallback_ISO1(date, month, year)    {        if (String(month).length == 1) {            month = '0' + month;        }            if (String(date).length == 1) {            date = '0' + date;        }            document.forms['posts'].tglpercobaan.value = year + '-' + month + '-' + date;    }    calendar1 = new dynCalendar('calendar1', 'exampleCallback_ISO1');    calendar1.setMonthCombo(true);    calendar1.setYearCombo(true);/*]]>*/     </script>eof;$tanggalkontrak = <<<eof<script language="JavaScript" type="text/javascript">        /**    * Example callback function    */    /*<![CDATA[*/    function exampleCallback_ISO4(date, month, year)    {        if (String(month).length == 1) {            month = '0' + month;        }            if (String(date).length == 1) {            date = '0' + date;        }            document.forms['posts'].tglkontrak.value = year + '-' + month + '-' + date;    }    calendar4 = new dynCalendar('calendar4', 'exampleCallback_ISO4');    calendar4.setMonthCombo(true);    calendar4.setYearCombo(true);/*]]>*/     </script>eof;$tanggalmelamar = <<<eof<script language="JavaScript" type="text/javascript">        /**    * Example callback function    */    /*<![CDATA[*/    function exampleCallback_ISO5(date, month, year)    {        if (String(month).length == 1) {            month = '0' + month;        }            if (String(date).length == 1) {            date = '0' + date;        }            document.forms['posts'].tglmelamar.value = year + '-' + month + '-' + date;    }    calendar5 = new dynCalendar('calendar5', 'exampleCallback_ISO5');    calendar5.setMonthCombo(true);    calendar5.setYearCombo(true);/*]]>*/     </script>eof;$JS_SCRIPT= <<<js<script language="JavaScript" type="text/javascript">$(document).ready(function() {    $('#example').dataTable();} );</script>js;$script_include[] = $JS_SCRIPT;global $maxadmindata;if (isset ($_GET['pg'])) $pg = int_filter ($_GET['pg']); else $pg = 0;if (isset ($_GET['stg'])) $stg = int_filter ($_GET['stg']); else $stg = 0;if (isset ($_GET['offset'])) $offset = int_filter ($_GET['offset']); else $offset = 0;$admin  .='<h4 class="page-header">Administrasi Karyawan</h4>';$admin .='<ol class="breadcrumb"><li><a href="?pilih=mnkaryawan&amp;mod=yes">Home</a></li><li><a href="?pilih=karyawan&amp;mod=yes&amp;aksi=tambah_ckaryawan">Tambah Calon Karyawan</a></li><li><a href="?pilih=karyawan&amp;mod=yes&amp;aksi=cari_ckaryawan">Cari Calon Karyawan</a></li><li><a href="?pilih=karyawan&amp;mod=yes&amp;aksi=tambah_karyawan">Tambah Karyawan</a></li><li><a href="?pilih=karyawan&amp;mod=yes&amp;aksi=cari_karyawan">Cari Karyawan</a></li><li><a href="?pilih=karyawan&amp;mod=yes&amp;aksi=rekap_karyawan">Rekap Karyawan</a></li><li><a href="?pilih=resign&amp;mod=yes&amp;aksi=cari_karyawan">Karyawan Resign</a></li></ol>';#################################### List karyawan###################################if($_GET['aksi']==""){$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=mnkaryawan&mod=yes">';}#################################### Tambah karyawan###################################if($_GET['aksi']=="tambah_karyawan"){$admin .='<h5 class="bg"><b>Tambah karyawan</b></h5>';if (isset($_POST['submit'])){	define("GIS_GIF", 1);define("GIS_JPG", 2);define("GIS_PNG", 3);define("GIS_SWF", 4);include "includes/hft_image.php";$nip  			= $_POST['nip'];$nama     		= text_filter($_POST['nama']);$kotalahir  			= $_POST['kotalahir'];$tgllahir  			= $_POST['tgllahir'];$kelamin		= $_POST['kelamin'];$agama			= $_POST['agama'];$menikah			= $_POST['menikah'];$alamat  		= $_POST['alamat'];$kota  			= $_POST['kota'];$kodepos  			= $_POST['kodepos'];$propinsi 		= $_POST['propinsi'];$negara 		= $_POST['negara'];$telepon 		= $_POST['telepon'];$handphone 		= $_POST['handphone'];$namafile_name 	= $_FILES['gambar']['name'];$departemen 		= $_POST['departemen'];$jabatan		= $_POST['jabatan'];$status		= $_POST['status'];$pendidikan_terakhir = $_POST['pendidikan_terakhir'];$tglditerima = $_POST['tglditerima'];$tglpercobaan = $_POST['tglpercobaan'];$tglkontrak = $_POST['tglkontrak'];$jatahcuti = $_POST['jatahcuti'];$norek = $_POST['norek'];$namarek = $_POST['namarek'];$npwp = $_POST['npwp'];$total = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan WHERE nip = '".$_POST['nip']."'");$jumlah = $koneksi_db->sql_numrows( $total );$error = '';if ($jumlah) $error .= "Error: NIP karyawan $nip sudah ada di dalam database!<br />";if (!$nip)  $error .= "Error: Nip wajib diisi!<br />";if ($error){$admin.='<div class="alert alert-danger">'.$error.'</div>';}else{if (!empty ($namafile_name)){$files = $_FILES['gambar']['name'];$tmp_files = $_FILES['gambar']['tmp_name'];$tempnews 	= 'mod/karyawan/images/temp/';$namagambar = md5 (rand(1,100).$files) .'.jpg';$uploaddir = $tempnews . $namagambar; $uploads = move_uploaded_file($tmp_files, $uploaddir);if (file_exists($uploaddir)){@chmod($uploaddir,0644);}	$gnews 		= 'mod/karyawan/images/normal/';$nsmall = $gnews . $namagambar;create_thumbnail ($uploaddir, $nsmall, $new_width = 310, $new_height = 'auto', $quality = 100);$hasil = $koneksi_db->sql_query( "INSERT INTO hrd_karyawan (nip,nama,kotalahir,tgllahir,kelamin,agama,menikah,alamat,kota,kodepos,propinsi,negara,telepon,handphone,foto,departemen,jabatan,status,pendidikan_terakhir,tglditerima,tglpercobaan,tglkontrak,jatahcuti,norek,namarek,npwp) VALUES ('$nip','$nama','$kotalahir','$tgllahir','$kelamin','$agama','$menikah','$alamat','$kota','$kodepos','$propinsi','$negara','$telepon','$handphone','$namagambar','$departemen','$jabatan','$status','$pendidikan_terakhir','$tglditerima','$tglpercobaan','$tglkontrak','$jatahcuti','$norek','$namarek','$npwp')" );if($hasil){$admin.='<div class="alert alert-success"><strong>Berhasil!</strong> Data karyawan dengan nama <u>'.stripslashes($_POST['nama']).'</u> berhasil disimpan</div>';$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=mnkaryawan&mod=yes">';unlink($uploaddir);}}else{//masukkan data$nip  			= $_POST['nip'];$nama     		= text_filter($_POST['nama']);$kotalahir  			= $_POST['kotalahir'];$tgllahir  			= $_POST['tgllahir'];$kelamin		= $_POST['kelamin'];$agama			= $_POST['agama'];$menikah			= $_POST['menikah'];$alamat  		= $_POST['alamat'];$kota  			= $_POST['kota'];$kodepos  			= $_POST['kodepos'];$propinsi 		= $_POST['propinsi'];$negara 		= $_POST['negara'];$telepon 		= $_POST['telepon'];$handphone 		= $_POST['handphone'];$namafile_name 	= $_FILES['gambar']['name'];$departemen 		= $_POST['departemen'];$jabatan		= $_POST['jabatan'];$status		= $_POST['status'];$pendidikan_terakhir = $_POST['pendidikan_terakhir'];$tglditerima = $_POST['tglditerima'];$tglpercobaan = $_POST['tglpercobaan'];$tglkontrak = $_POST['tglkontrak'];$jatahcuti = $_POST['jatahcuti'];$tipe = $_POST['tipe'];$tglresign = $_POST['tglresign'];$alasan = $_POST['alasan'];$lampiran_name = $_FILES['lampiran']['name'];//masukkan data$hasil = $koneksi_db->sql_query( "INSERT INTO hrd_karyawan (nip,nama,kotalahir,tgllahir,kelamin,agama,menikah,alamat,kota,kodepos,propinsi,negara,telepon,handphone,departemen,jabatan,status,pendidikan_terakhir,tglditerima,tglpercobaan,tglkontrak,jatahcuti,norek,namarek,npwp) VALUES ('$nip','$nama','$kotalahir','$tgllahir','$kelamin','$agama','$menikah','$alamat','$kota','$kodepos','$propinsi','$negara','$telepon','$handphone','$departemen','$jabatan','$status','$pendidikan_terakhir','$tglditerima','$tglpercobaan','$tglkontrak','$jatahcuti','$norek','$namarek','$npwp')" );if($hasil){$admin.='<div class="alert alert-success"><strong>Berhasil!</strong> Data karyawan dengan nama <u>'.stripslashes($_POST['nama']).'</u> berhasil disimpan</div>';$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=karyawan&mod=yes">';}}}}$nip 			= !isset($nip) ? '' : $nip;$nama 			= !isset($nama) ? '' : $nama;$kotalahir 			= !isset($kotalahir) ? '' : $kotalahir;$menikah 			= !isset($menikah) ? '' : $menikah;$pendidikan_terakhir = !isset($pendidikan_terakhir) ? '' : $pendidikan_terakhir;$jabatan  		= !isset($jabatan) ? '' : $jabatan;$kelamin  		= !isset($kelamin) ? '' : $kelamin;$agama  		= !isset($agama) ? '' : $agama;$alamat			= !isset($alamat) ? '' : $alamat;$kota			= !isset($kota) ? '' : $kota;$kodepos			= !isset($kodepos) ? '' : $kodepos;$propinsi		= !isset($propinsi) ? '' : $propinsi;$negara			= !isset($negara) ? '' : $negara;$telepon		= !isset($telepon) ? '' : $telepon;$handphone		= !isset($handphone) ? '' : $handphone;$departemen		= !isset($departemen) ? '' : $departemen;$jabatan		= !isset($jabatan) ? '' : $jabatan;$status		= !isset($status) ? '' : $status;$tglnow = date("Y-m-d");$tgllahir 		= !isset($tgllahir) ? $tglnow : $tgllahir;$tglditerima 		= !isset($tglditerima) ? $tglnow : $tglditerima;$tglpercobaan 		= !isset($tglpercobaan) ? '' : $tglpercobaan;$tglkontrak 		= !isset($tglkontrak) ? '' : $tglkontrak;$jatahcuti 		= !isset($jatahcuti) ? '0' : $jatahcuti;$norek 		= !isset($norek) ? '' : $norek;$namarek 		= !isset($namarek) ? '' : $namarek;$npwp 		= !isset($npwp) ? '' : $npwp;$admin .= '<form class="form-inline" method="post" action="" enctype ="multipart/form-data" id="posts"><table class="table table-striped table-hover"><tr>	<td>NIP</td>	<td><input type="text" name="nip" value="'.$nip.'" size="30" class="form-control"></td></tr><tr>	<td>Nama Lengkap</td>	<td><input type="text" name="nama" value="'.$nama.'" size="30" class="form-control"></td></tr><tr>	<td>Kota Lahir</td>	<td><input type="text" name="kotalahir" value="'.$kotalahir.'" size="30" class="form-control"></td></tr><tr>	<td>Tanggal Lahir</td>	<td><input type="text" name="tgllahir" value="'.$tgllahir.'" size="30" class="form-control">'.$tanggallahir.'</td></tr><tr>	<td>Jenis Kelamin</td>	<td><select name="kelamin" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_kelamin ORDER BY kelamin");$admin .= '<option value="-">== Jenis Kelamin ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['kelamin'].'</option>';}$admin .='</select></td></tr><tr>	<td>Agama</td>	<td><select name="agama" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_agama ORDER BY nama");$admin .= '<option value="-">== Agama ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Menikah</td>	<td><select name="menikah" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_menikah ORDER BY nama");$admin .= '<option value="-">== Status ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Alamat Lengkap</td>	<td><input type="text" name="alamat" value="'.$alamat.'" size="50" class="form-control"></td></tr><tr>	<td>Kota</td>	<td><input type="text" name="kota" value="'.$kota.'" size="30" class="form-control"></td></tr><tr>	<td>Kode Pos</td>	<td><input type="text" name="kodepos" value="'.$kodepos.'" size="30" class="form-control"></td></tr><tr>	<td>Propinsi</td>	<td><input type="text" name="propinsi" value="'.$propinsi.'" size="30" class="form-control"></td></tr><tr>	<td>Negara</td>	<td><input type="text" name="negara" value="'.$negara.'" size="30" class="form-control"></td></tr><tr>	<td>Telepon</td>	<td><input type="text" name="telepon" value="'.$telepon.'" size="30" class="form-control"></td></tr><tr>	<td>Handphone</td>	<td><input type="text" name="handphone" value="'.$handphone.'" size="30" class="form-control"></td></tr><tr>	<td>Pendidikan Terakhir</td>	<td><select name="pendidikan_terakhir" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_pendidikan ORDER BY id");$admin .= '<option value="-">== Pendidikan ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Foto</td>	<td><input type="file" name="gambar" size="30"><p class="help-block">Extensi foto harus JPG</p></td></tr><tr>	<td>Sub Departemen</td>	<td><select name="departemen" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_departemen ORDER BY id");$admin .= '<option value="-">== Departemen ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Jabatan</td>	<td><select name="jabatan" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_jabatan ORDER BY id");$admin .= '<option value="-">== Jabatan ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Status</td>	<td><select name="status" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_statuskaryawan ORDER BY id");$admin .= '<option value="-">== Status Karyawan ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Tanggal Diterima</td>	<td><input type="text" name="tglditerima" value="'.$tglditerima.'" size="30" class="form-control">'.$tanggalditerima.'</td></tr><tr>	<td>Tanggal Akhir Percobaan</td>	<td><input type="text" name="tglpercobaan" value="'.$tglpercobaan.'" size="30" class="form-control">'.$tanggalpercobaan.'</td></tr><tr>	<td>Tanggal Akhir Kontrak</td>	<td><input type="text" name="tglkontrak" value="'.$tglkontrak.'" size="30" class="form-control">'.$tanggalkontrak.' ( Kosongi Bila Pegawai Tetap )</td></tr><tr>	<td>Jatah Cuti</td>	<td><input type="text" name="jatahcuti" value="'.$jatahcuti.'" size="30" class="form-control">( Jatah Cuti Hari dalam satu tahun )</td></tr><tr>	<td>Account PaninBank</td>	<td><input type="text" name="norek" value="'.$norek.'" size="30" class="form-control" required></td></tr><tr>	<td>Nama Rek.Payroll</td>	<td><input type="text" name="namarek" value="'.$namarek.'" size="30" class="form-control"required></td></tr><tr>	<td>NPWP</td>	<td><input type="text" name="npwp" value="'.$npwp.'" size="30" class="form-control"required></td></tr><tr>	<td></td>	<td><input type="submit" value="Simpan" name="submit" class="btn btn-success"></td></table></form>';}#################################### Tambah calon karyawan###################################if($_GET['aksi']=="tambah_ckaryawan"){$admin .='<h5 class="bg"><b>Tambah Calon Karyawan</b></h5>';if (isset($_POST['submit'])){	define("GIS_GIF", 1);define("GIS_JPG", 2);define("GIS_PNG", 3);define("GIS_SWF", 4);include "includes/hft_image.php";$tglmelamar = $_POST['tglmelamar'];$nama     		= text_filter($_POST['nama']);$kotalahir  			= $_POST['kotalahir'];$tgllahir  			= $_POST['tgllahir'];$kelamin		= $_POST['kelamin'];$agama			= $_POST['agama'];$menikah			= $_POST['menikah'];$alamat  		= $_POST['alamat'];$kota  			= $_POST['kota'];$kodepos  			= $_POST['kodepos'];$propinsi 		= $_POST['propinsi'];$negara 		= $_POST['negara'];$telepon 		= $_POST['telepon'];$handphone 		= $_POST['handphone'];$namafile_name 	= $_FILES['gambar']['name'];$departemen 		= $_POST['departemen'];$jabatan		= $_POST['jabatan'];$status		= $_POST['status'];$pendidikan_terakhir = $_POST['pendidikan_terakhir'];if ($error){$admin.='<div class="alert alert-danger">'.$error.'</div>';}else{if (!empty ($namafile_name)){$files = $_FILES['gambar']['name'];$tmp_files = $_FILES['gambar']['tmp_name'];$tempnews 	= 'mod/karyawan/images/temp/';$namagambar = md5 (rand(1,100).$files) .'.jpg';$uploaddir = $tempnews . $namagambar; $uploads = move_uploaded_file($tmp_files, $uploaddir);if (file_exists($uploaddir)){@chmod($uploaddir,0644);}	$gnews 		= 'mod/karyawan/images/normal/';$nsmall = $gnews . $namagambar;create_thumbnail ($uploaddir, $nsmall, $new_width = 310, $new_height = 'auto', $quality = 100);$hasil = $koneksi_db->sql_query( "INSERT INTO hrd_karyawan (tglmelamar,nama,kotalahir,tgllahir,kelamin,agama,menikah,alamat,kota,kodepos,propinsi,negara,telepon,handphone,foto,departemen,jabatan,status,pendidikan_terakhir,tipe) VALUES ('$tglmelamar','$nama','$kotalahir','$tgllahir','$kelamin','$agama','$menikah','$alamat','$kota','$kodepos','$propinsi','$negara','$telepon','$handphone','$namagambar','$departemen','$jabatan','$status','$pendidikan_terakhir','0')" );if($hasil){$admin.='<div class="alert alert-success"><strong>Berhasil!</strong> Data calon karyawan dengan nama <u>'.stripslashes($_POST['nama']).'</u> berhasil disimpan</div>';$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=mnkaryawan&mod=yes">';unlink($uploaddir);}}else{//masukkan data$tglmelamar  			= $_POST['tglmelamar'];$nama     		= text_filter($_POST['nama']);$kotalahir  			= $_POST['kotalahir'];$tgllahir  			= $_POST['tgllahir'];$kelamin		= $_POST['kelamin'];$agama			= $_POST['agama'];$menikah			= $_POST['menikah'];$alamat  		= $_POST['alamat'];$kota  			= $_POST['kota'];$kodepos  			= $_POST['kodepos'];$propinsi 		= $_POST['propinsi'];$negara 		= $_POST['negara'];$telepon 		= $_POST['telepon'];$handphone 		= $_POST['handphone'];$namafile_name 	= $_FILES['gambar']['name'];$departemen 		= $_POST['departemen'];$jabatan		= $_POST['jabatan'];$status		= $_POST['status'];$pendidikan_terakhir = $_POST['pendidikan_terakhir'];//masukkan data$hasil = $koneksi_db->sql_query( "INSERT INTO hrd_karyawan (tglmelamar,nama,kotalahir,tgllahir,kelamin,agama,menikah,alamat,kota,kodepos,propinsi,negara,telepon,handphone,departemen,jabatan,status,pendidikan_terakhir,tipe) VALUES ('$tglmelamar','$nama','$kotalahir','$tgllahir','$kelamin','$agama','$menikah','$alamat','$kota','$kodepos','$propinsi','$negara','$telepon','$handphone','$departemen','$jabatan','$status','$pendidikan_terakhir','0')" );if($hasil){$admin.='<div class="alert alert-success"><strong>Berhasil!</strong> Data karyawan dengan nama <u>'.stripslashes($_POST['nama']).'</u> berhasil disimpan</div>';$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=karyawan&mod=yes">';}}}}$tglnow = date("Y-m-d");$tglmelamar 		= !isset($tglmelamar) ? $tglnow : $tglmelamar;$nama 			= !isset($nama) ? '' : $nama;$kotalahir 			= !isset($kotalahir) ? '' : $kotalahir;$menikah 			= !isset($menikah) ? '' : $menikah;$pendidikan_terakhir = !isset($pendidikan_terakhir) ? '' : $pendidikan_terakhir;$jabatan  		= !isset($jabatan) ? '' : $jabatan;$kelamin  		= !isset($kelamin) ? '' : $kelamin;$agama  		= !isset($agama) ? '' : $agama;$alamat			= !isset($alamat) ? '' : $alamat;$kota			= !isset($kota) ? '' : $kota;$kodepos			= !isset($kodepos) ? '' : $kodepos;$propinsi		= !isset($propinsi) ? '' : $propinsi;$negara			= !isset($negara) ? '' : $negara;$telepon		= !isset($telepon) ? '' : $telepon;$handphone		= !isset($handphone) ? '' : $handphone;$departemen		= !isset($departemen) ? '' : $departemen;$jabatan		= !isset($jabatan) ? '' : $jabatan;$status		= !isset($status) ? '' : $status;$admin .= '<form class="form-inline" method="post" action="" enctype ="multipart/form-data" id="posts"><table class="table table-striped table-hover"><tr>	<td>tanggal Melamar</td>	<td><input type="text" name="tglmelamar" value="'.$tglmelamar.'" size="30" class="form-control">'.$tanggalmelamar.'</td></tr><tr>	<td>Nama Lengkap</td>	<td><input type="text" name="nama" value="'.$nama.'" size="30" class="form-control"></td></tr><tr>	<td>Kota Lahir</td>	<td><input type="text" name="kotalahir" value="'.$kotalahir.'" size="30" class="form-control"></td></tr><tr>	<td>Tanggal Lahir</td>	<td><input type="text" name="tgllahir" value="'.$tgllahir.'" size="30" class="form-control">'.$tanggallahir.'</td></tr><tr>	<td>Jenis Kelamin</td>	<td><select name="kelamin" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_kelamin ORDER BY kelamin");$admin .= '<option value="-">== Jenis Kelamin ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['kelamin'].'</option>';}$admin .='</select></td></tr><tr>	<td>Agama</td>	<td><select name="agama" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_agama ORDER BY nama");$admin .= '<option value="-">== Agama ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Menikah</td>	<td><select name="menikah" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_menikah ORDER BY nama");$admin .= '<option value="-">== Status ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Alamat Lengkap</td>	<td><input type="text" name="alamat" value="'.$alamat.'" size="50" class="form-control"></td></tr><tr>	<td>Kota</td>	<td><input type="text" name="kota" value="'.$kota.'" size="30" class="form-control"></td></tr><tr>	<td>Kode Pos</td>	<td><input type="text" name="kodepos" value="'.$kodepos.'" size="30" class="form-control"></td></tr><tr>	<td>Propinsi</td>	<td><input type="text" name="propinsi" value="'.$propinsi.'" size="30" class="form-control"></td></tr><tr>	<td>Negara</td>	<td><input type="text" name="negara" value="'.$negara.'" size="30" class="form-control"></td></tr><tr>	<td>Telepon</td>	<td><input type="text" name="telepon" value="'.$telepon.'" size="30" class="form-control"></td></tr><tr>	<td>Handphone</td>	<td><input type="text" name="handphone" value="'.$handphone.'" size="30" class="form-control"></td></tr><tr>	<td>Pendidikan Terakhir</td>	<td><select name="pendidikan_terakhir" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_pendidikan ORDER BY id");$admin .= '<option value="-">== Pendidikan ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$admin .= '<option value="'.$datas['id'].'">'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Foto</td>	<td><input type="file" name="gambar" size="30"><p class="help-block">Extensi foto harus JPG</p></td></tr><tr>	<td></td>	<td><input type="submit" value="Simpan" name="submit" class="btn btn-success"></td></table></form>';}#################################### Edit Karyawan###################################if($_GET['aksi']=="edit_karyawan"){$id     = int_filter($_GET['id']);$s = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan WHERE id=$id");$datas = $koneksi_db->sql_fetchrow($s);$nama = $datas['nama'];$admin .='<h5 class="bg">Edit karyawan dengan nama <strong>'.$nama.'</strong></h5>';if (isset($_POST['submit'])){	define("GIS_GIF", 1);define("GIS_JPG", 2);define("GIS_PNG", 3);define("GIS_SWF", 4);include "includes/hft_image.php";$namafile_name = $_FILES['foto']['name'];$fotolama  = $_POST['fotolama'];$nip  			= $_POST['nip'];$nama     		= text_filter($_POST['nama']);$kotalahir  			= $_POST['kotalahir'];$tgllahir  			= $_POST['tgllahir'];$kelamin		= $_POST['kelamin'];$agama			= $_POST['agama'];$menikah			= $_POST['menikah'];$alamat  		= $_POST['alamat'];$kota  			= $_POST['kota'];$kodepos  			= $_POST['kodepos'];$propinsi 		= $_POST['propinsi'];$negara 		= $_POST['negara'];$telepon 		= $_POST['telepon'];$handphone 		= $_POST['handphone'];$departemen 		= $_POST['departemen'];$jabatan		= $_POST['jabatan'];$status		= $_POST['status'];$pendidikan_terakhir = $_POST['pendidikan_terakhir'];$tglditerima = $_POST['tglditerima'];$tglpercobaan = $_POST['tglpercobaan'];$tglkontrak = $_POST['tglkontrak'];$jatahcuti = $_POST['jatahcuti'];$norek = $_POST['norek'];$namarek = $_POST['namarek'];$npwp = $_POST['npwp'];$total = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan WHERE nip = '".$_POST['nip']."' and id != '".$id."'");$jumlah = $koneksi_db->sql_numrows( $total );$error = '';if ($jumlah) $error .= "Error: NIP karyawan $nip sudah ada di dalam database!<br />";if (!$nip)  $error .= "Error: NIP wajib diisi!<br />";if ($error){$admin.='<div class="alert alert-danger">'.$error.'</div>';}else{if (!empty ($namafile_name)){$files = $_FILES['foto']['name'];$tmp_files = $_FILES['foto']['tmp_name'];$namagambar = md5 (rand(1,100).$files) .'.jpg';$tempnews 	= 'mod/karyawan/images/temp/';$uploaddir = $tempnews . $namagambar; $uploads = move_uploaded_file($tmp_files, $uploaddir);if (file_exists($uploaddir)){@chmod($uploaddir,0644);}	$gnews 		= 'mod/karyawan/images/normal/';$nsmall = $gnews . $namagambar;$nfotolama = $gnews . $fotolama;unlink($nfotolama);    create_thumbnail ($uploaddir, $nsmall, $new_width = 310, $new_height = 'auto', $quality = 100);//masukkan data$hasil = $koneksi_db->sql_query( "UPDATE hrd_karyawan SET nip='$nip', nama='$nama', kotalahir='$kotalahir', tgllahir='$tgllahir', pendidikan_terakhir='$pendidikan_terakhir', departemen='$departemen', status='$status', jabatan='$jabatan', kelamin='$kelamin', agama='$agama', alamat='$alamat', kota='$kota', kodepos='$kodepos', propinsi='$propinsi', negara='$negara', telepon='$telepon', handphone='$handphone', foto='$namagambar', tglditerima='$tglditerima', tglpercobaan='$tglpercobaan', tglkontrak='$tglkontrak', jatahcuti='$jatahcuti', norek='$norek', namarek='$namarek', npwp='$npwp' WHERE id='$id'" );unlink($uploaddir);if($hasil){$admin.='<div class="alert alert-success"><strong>Berhasil!</strong> karyawan dengan nama <strong>'.stripslashes ($_POST['nama']).'</strong> berhasil disimpan</div>';$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=karyawan&mod=yes">';}}else{//masukkan data$hasil = $koneksi_db->sql_query( "UPDATE hrd_karyawan SET nip='$nip', nama='$nama', kotalahir='$kotalahir', tgllahir='$tgllahir', pendidikan_terakhir='$pendidikan_terakhir', departemen='$departemen', status='$status', jabatan='$jabatan', kelamin='$kelamin', agama='$agama', alamat='$alamat', kota='$kota', kodepos='$kodepos', propinsi='$propinsi', negara='$negara', telepon='$telepon', handphone='$handphone', tglditerima='$tglditerima', tglpercobaan='$tglpercobaan', tglkontrak='$tglkontrak', jatahcuti='$jatahcuti', norek='$norek', namarek='$namarek', npwp='$npwp' WHERE id='$id'" );if($hasil){$admin.='<div class="alert alert-success"><strong>Berhasil!</strong> karyawan dengan nama <strong>'.stripslashes ($_POST['nama']).'</strong> berhasil disimpan</div>';$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=karyawan&mod=yes&aksi=cari_karyawan">';}}}}$hasil = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan WHERE id=$id" );$data = $koneksi_db->sql_fetchrow($hasil);$nip  			= $data['nip'];$nama     		= text_filter($data['nama']);$kotalahir  	= $data['kotalahir'];$tgllahir  		= $data['tgllahir'];$kelamin		= $data['kelamin'];$agama			= $data['agama'];$menikah		= $data['menikah'];$alamat  		= $data['alamat'];$kota  			= $data['kota'];$kodepos  			= $data['kodepos'];$propinsi 		= $data['propinsi'];$negara 		= $data['negara'];$telepon 		= $data['telepon'];$handphone 		= $data['handphone'];$departemen 	= $data['departemen'];$jabatan		= $data['jabatan'];$status		= $data['status'];$pendidikan_terakhir = $data['pendidikan_terakhir'];$fotolama 	= $data['foto'];$tglditerima = $data['tglditerima'];$tglpercobaan = $data['tglpercobaan'];$tglkontrak = $data['tglkontrak'];$jatahcuti = $data['jatahcuti'];$norek = $data['norek'];$namarek = $data['namarek'];$npwp = $data['npwp'];$admin .= '<form class="form-inline" method="post" action="" enctype ="multipart/form-data" id="posts"><table class="table table-striped table-hover"><tr>	<td>NIP</td>	<td><input type="text" name="nip" value="'.$nip.'" size="30" class="form-control"></td></tr><tr>	<td>Nama Lengkap</td>	<td><input type="text" name="nama" value="'.$nama.'" size="30" class="form-control"></td></tr><tr>	<td>Kota Lahir</td>	<td><input type="text" name="kotalahir" value="'.$kotalahir.'" size="30" class="form-control"></td></tr><tr>	<td>Tanggal Lahir</td>	<td><input type="text" name="tgllahir" value="'.$tgllahir.'" size="30" class="form-control">'.$tanggallahir.'</td></tr><tr>	<td>Jenis Kelamin</td>	<td><select name="kelamin" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_kelamin ORDER BY kelamin");$admin .= '<option value="-">== Jenis Kelamin ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$pilihan = ($datas['id']==$kelamin)?"selected":'';$admin .= '<option value="'.$datas['id'].'" '.$pilihan.'>'.$datas['kelamin'].'</option>';}$admin .='</select></td></tr><tr>	<td>Agama</td>	<td><select name="agama" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_agama ORDER BY nama");$admin .= '<option value="-">== Agama ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$pilihan = ($datas['id']==$agama)?"selected":'';$admin .= '<option value="'.$datas['id'].'" '.$pilihan.'>'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Menikah</td>	<td><select name="menikah" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_menikah ORDER BY id");$admin .= '<option value="-">== Status ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$pilihan = ($datas['id']==$menikah)?"selected":'';$admin .= '<option value="'.$datas['id'].'" '.$pilihan.'>'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Alamat Lengkap</td>	<td><input type="text" name="alamat" value="'.$alamat.'" size="50" class="form-control"></td></tr><tr>	<td>Kota</td>	<td><input type="text" name="kota" value="'.$kota.'" size="30" class="form-control"></td></tr><tr>	<td>Kode Pos</td>	<td><input type="text" name="kodepos" value="'.$kodepos.'" size="30" class="form-control"></td></tr><tr>	<td>Propinsi</td>	<td><input type="text" name="propinsi" value="'.$propinsi.'" size="30" class="form-control"></td></tr><tr>	<td>Negara</td>	<td><input type="text" name="negara" value="'.$negara.'" size="30" class="form-control"></td></tr><tr>	<td>Telepon</td>	<td><input type="text" name="telepon" value="'.$telepon.'" size="30" class="form-control"></td></tr><tr>	<td>Handphone</td>	<td><input type="text" name="handphone" value="'.$handphone.'" size="30" class="form-control"></td></tr><tr>	<td>Pendidikan Terakhir</td>	<td><select name="pendidikan_terakhir" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_pendidikan ORDER BY id");$admin .= '<option value="-">== Pendidikan Terakhir ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$pilihan = ($datas['id']==$pendidikan_terakhir)?"selected":'';$admin .= '<option value="'.$datas['id'].'" '.$pilihan.'>'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Foto</td>	<td><input type="file" name="foto" size="53"><p class="help-block">Extensi foto harus JPG</p></td></tr>';if(!$fotolama){$fotolama='profile-default.jpg';}$admin .='<tr>	<td></td>	<td><img src="mod/karyawan/images/normal/'.$fotolama.'" height="120">	<input type="hidden" name="fotolama" value="'.$fotolama.'"></td></tr><tr>	<td>Departemen</td>	<td><select name="departemen" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_departemen ORDER BY nama");$admin .= '<option value="-">== Departemen ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$pilihan = ($datas['id']==$departemen)?"selected":'';$admin .= '<option value="'.$datas['id'].'" '.$pilihan.'>'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Jabatan</td>	<td><select name="jabatan" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_jabatan ORDER BY id");$admin .= '<option value="-">== Jabatan ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$pilihan = ($datas['id']==$jabatan)?"selected":'';$admin .= '<option value="'.$datas['id'].'" '.$pilihan.'>'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Status</td>	<td><select name="status" class="form-control">';$hasil = $koneksi_db->sql_query("SELECT * FROM hrd_statuskaryawan ORDER BY nama");$admin .= '<option value="-">== Status ==</option>';while ($datas =  $koneksi_db->sql_fetchrow ($hasil)){$pilihan = ($datas['id']==$status)?"selected":'';$admin .= '<option value="'.$datas['id'].'" '.$pilihan.'>'.$datas['nama'].'</option>';}$admin .='</select></td></tr><tr>	<td>Tanggal Diterima</td>	<td><input type="text" name="tglditerima" value="'.$tglditerima.'" size="30" class="form-control">'.$tanggalditerima.'</td></tr><tr>	<td>Tanggal Akhir Percobaan</td>	<td><input type="text" name="tglpercobaan" value="'.$tglpercobaan.'" size="30" class="form-control">'.$tanggalpercobaan.'</td></tr><tr>	<td>Tanggal Akhir Kontrak</td>	<td><input type="text" name="tglkontrak" value="'.$tglkontrak.'" size="30" class="form-control">'.$tanggalkontrak.'</td></tr><tr>	<td>Jatah Cuti</td>	<td><input type="text" name="jatahcuti" value="'.$jatahcuti.'" size="30" class="form-control">( Jatah Cuti Hari dalam satu tahun )</td></tr><tr>	<td>Account PaninBank</td>	<td><input type="text" name="norek" value="'.$norek.'" size="30" class="form-control" required></td></tr><tr>	<td>Nama Rek.Payroll</td>	<td><input type="text" name="namarek" value="'.$namarek.'" size="30" class="form-control"required></td></tr><tr>	<td>NPWP</td>	<td><input type="text" name="npwp" value="'.$npwp.'" size="30" class="form-control"required></td></tr><tr>	<td></td>	<td><input type="submit" value="Simpan" name="submit" class="btn btn-success"></td></table></form>';}#################################### Hapus Karyawan###################################if($_GET['aksi']=="hapus_karyawan"){global $koneksi_db;$id     = int_filter($_GET['id']);$hasil = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan WHERE id=$id" );while($data = mysql_fetch_array($hasil)){$tempnews 	= 'mod/karyawan/images/normal/';$namagambar =  $data['foto'];$uploaddir = $tempnews . $namagambar; if($namagambar!=""){unlink($uploaddir);}}$koneksi_db->sql_query("DELETE FROM hrd_karyawan WHERE id='$id'");$koneksi_db->sql_query("DELETE FROM hrd_absensi WHERE karyawan='$id'");$koneksi_db->sql_query("DELETE FROM hrd_penggajian WHERE karyawan='$id'");$cek  = $koneksi_db->sql_query( "SELECT gambar FROM hrd_history WHERE karyawan=$id" );while($data = mysql_fetch_array($cek)){ $gambar = $data['gambar'];$uploaddir = $normal2 . $gambar;unlink($uploaddir);}$koneksi_db->sql_query("DELETE FROM hrd_history WHERE karyawan='$id'");$cek  = $koneksi_db->sql_query( "SELECT gambar FROM hrd_berkas WHERE karyawan=$id" );while($data = mysql_fetch_array($cek)){ $gambar = $data['gambar'];$uploaddir = $normal2 . $gambar;unlink($uploaddir);}$koneksi_db->sql_query("DELETE FROM hrd_berkas WHERE karyawan='$id'");$admin.='<div class="alert alert-success"><strongBerhasil!</strong> Data karyawan berhasil di hapus</div>';$style_include[] ='<meta http-equiv="refresh" content="1; url=?pilih=karyawan&mod=yes">';}#################################### Detail Karyawan###################################if($_GET['aksi']=="detail_karyawan"){$id     = int_filter($_GET['id']);$hasil = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan WHERE id=$id" );$data = $koneksi_db->sql_fetchrow($hasil);$nip  			= $data['nip'];$nama     		= text_filter($data['nama']);$kotalahir  	= $data['kotalahir'];$tgllahir  		= $data['tgllahir'];$kelamin		= $data['kelamin'];$agama			= $data['agama'];$menikah		= $data['menikah'];$alamat  		= $data['alamat'];$kota  			= $data['kota'];$kodepos  			= $data['kodepos'];$propinsi 		= $data['propinsi'];$negara 		= $data['negara'];$telepon 		= $data['telepon'];$handphone 		= $data['handphone'];$departemen 	= $data['departemen'];$jabatan		= $data['jabatan'];$status		= $data['status'];$pendidikan_terakhir = $data['pendidikan_terakhir'];$fotolama 	= $data['foto'];$tglmelamar = $data['tglmelamar'];$tglditerima = $data['tglditerima'];$tglpercobaan = $data['tglpercobaan'];$tglkontrak = $data['tglkontrak'];$tglresign = $data['tglresign'];$alasan = $data['alasan'];$norek = $data['norek'];$namarek = $data['namarek'];$npwp = $data['npwp'];if(!$fotolama){$fotolama = 'profile-default.jpg';}$cetak = '<a href="cetak_karyawan.php?idkary='.$id.'" target="new"onclick="return confirm(\'Apakah Anda Ingin Mencetak Karyawan Ini ?\')" style="color:blue"><img src="images/print.gif">cetak</a>';$admin .= "<div align='center'>$cetak</div><br>";$admin .= '<div align="center"><img src="mod/karyawan/images/normal/'.$fotolama.'" height="120" class="img-rounded"></div><br><table class="table table-hover">';$admin .='';$admin .='<tr>	<td >NIP</td>	<td>: '.$nip.'</td></tr><tr>	<td>Nama Lengkap</td>	<td>: '.$nama.'</td></tr><tr>	<td>Kota Lahir</td>	<td>: '.$kotalahir.'</td></tr><tr>	<td>Tanggal Lahir</td>	<td>: '.datetimes($tgllahir,False,false).'</td></tr><tr>	<td>Jenis Kelamin</td>	<td>: '.getkelamin($kelamin).'</td></tr><tr>	<td>Agama</td>	<td>: '.getagama($agama).'</td></tr><tr>	<td>Menikah</td>	<td>: '.getmenikah($menikah).'</td></tr><tr>	<td>Alamat Lengkap</td>	<td>: '.$alamat.'</td></tr><tr>	<td>Kota</td>	<td>: '.$kota.'</td></tr><tr>	<td>Kode Pos</td>	<td>: '.$kodepos.'</td></tr><tr>	<td>Propinsi</td>	<td>: '.$propinsi.'</td></tr><tr>	<td>Negara</td>	<td>: '.$negara.'</td></tr><tr>	<td>Telepon</td>	<td>: '.$telepon.'</td></tr><tr>	<td>Handphone</td>	<td>: '.$handphone.'</td></tr><tr>	<td>Pendidikan Terakhir</td>	<td>: '.getpendidikan($pendidikan_terakhir).'</td></tr>';if($departemen){$admin .='<tr>	<td>Sub Departemen</td>	<td>: '.getdepartemen($departemen).'</td></tr>';}if($jabatan){$admin.='<tr>	<td>Jabatan</td>	<td>: '.getjabatan($jabatan).'</td></tr>';}if($status){$admin.='<tr>	<td>Status</td>	<td>: '.getstatus($status).'</td></tr>';}if($tglmelamar !=  '0000-00-00'){$admin.='<tr>	<td>Tanggal Melamar</td>	<td>: '.datetimes($tglmelamar,False,false).'</td></tr>';}if($tglditerima !=  '0000-00-00'){$admin.='<tr>	<td>Tanggal Diterima</td>	<td>: '.datetimes($tglditerima,False,false).'</td></tr>';}if($tglpercobaan !=  '0000-00-00'){$admin.='<tr>	<td>Tanggal Akhir Percobaan</td>	<td>: '.datetimes($tglpercobaan,False,false).'</td></tr>';}if($tglkontrak !=  '0000-00-00'){$admin.='<tr>	<td>Tanggal Akhir Kontrak</td>	<td>: '.datetimes($tglkontrak,False,false).'</td></tr>';}if($tglresign !=  '0000-00-00'){$admin.='<tr>	<td>Tanggal Resign</td>	<td>: '.datetimes($tglresign,False,false).'</td></tr><tr>	<td>Alasan</td>	<td>: '.$alasan.'</td></tr>';}$admin.='<tr>	<td>Account PaninBank</td>	<td>: '.$norek.'</td></tr><tr>	<td>Nama Rek_Payroll</td>	<td>: '.$namarek.'</td></tr><tr>	<td>NPWP</td>	<td>: '.$npwp.'</td></tr>';$admin.='</table>';}#################################### Cari karyawan###################################/*if($_GET['aksi']=="cari_karyawan"){$admin .= '<script lnguage="javascript"> function redir(mylist){ if (newurl=mylist.options[mylist.selectedIndex].value)document.location=newurl;}</script>';$admin .='<h5 class="bg"><b>Cari Karyawan</b></h5>';$admin .= '<div class="border"><table class="table table-striped table-hover"><tr><td><form method="get"action="admin.php">NIP : <input type="text" name="search" class="textbox"/><input type="submit" name="submit" class="btn btn-success" value="Cari" /><input type="hidden" name="pilih" value="karyawan" /><input type="hidden" name="mod" value="yes" /><input type="hidden" name="aksi" value="cari_karyawan" /></form></td><td><select onchange="redir(this)"><option value="#">- Pilih Agama -</option>';$bs = $koneksi_db->sql_query( "SELECT * FROM hrd_agama ORDER BY nama ASC" );while($dat = $koneksi_db->sql_fetchrow($bs)){	    $id= $dat['id'];$nama= $dat['nama'];$admin .= '<option value="admin.php?pilih=karyawan&mod=yes&aksi=cari_karyawan&agama='.$id.'" >'.$nama.'</option>';}  $admin .= '</select></td><td><select onchange="redir(this)"><option value="#">- Pilih Pendidikan -</option>';$bs = $koneksi_db->sql_query( "SELECT * FROM hrd_pendidikan ORDER BY nama ASC" );while($dat = $koneksi_db->sql_fetchrow($bs)){	    $id= $dat['id'];$nama= $dat['nama'];$admin .= '<option value="admin.php?pilih=karyawan&mod=yes&aksi=cari_karyawan&pendidikan_terakhir='.$id.'" >'.$nama.'</option>';}  $admin .= '</select></td><td><select onchange="redir(this)"><option value="#">- Pilih Jabatan -</option>';$bs = $koneksi_db->sql_query( "SELECT * FROM hrd_jabatan ORDER BY nama ASC" );while($dat = $koneksi_db->sql_fetchrow($bs)){	    $id= $dat['id'];$nama= $dat['nama'];$admin .= '<option value="admin.php?pilih=karyawan&mod=yes&aksi=cari_karyawan&jabatan='.$id.'" >'.$nama.'</option>';}  $admin .= '</select></td><td><select onchange="redir(this)"><option value="#">- Pilih Status -</option>';$bs = $koneksi_db->sql_query( "SELECT * FROM hrd_statuskaryawan ORDER BY nama ASC" );while($dat = $koneksi_db->sql_fetchrow($bs)){	    $id= $dat['id'];$nama= $dat['nama'];$admin .= '<option value="admin.php?pilih=karyawan&mod=yes&aksi=cari_karyawan&status='.$id.'" >'.$nama.'</option>';}  $admin .= '</select></td></tr></table></div>';$search = $_GET['search'];$agama = $_GET['agama'];$pendidikan_terakhir = $_GET['pendidikan_terakhir'];$jabatan = $_GET['jabatan'];$status = $_GET['status'];$admin .= '<table class="table table-striped table-hover"><thead><tr><th class="text-center">No</th><th>Photo</th><th>NIP</th><th>Nama</th><th>TglLahir</th><th>Agama</th><th>Pendidikan</th><th>Jabatan</th><th>Status</th><th>Lama Kerja</th><th>Aksi</th></tr></thead><tbody>';if($search){$query1 = mysql_query ("SELECT count(id) AS total_files FROM hrd_karyawan WHERE nip like '%$search%' or nama like '%$search%' and tipe='1'");}else if($agama or $pendidikan_terakhir or $jabatan or $status){$query1 = mysql_query ("SELECT count(id) AS total_files FROM hrd_karyawan WHERE agama ='$agama' or pendidikan_terakhir ='$pendidikan_terakhir' or jabatan ='$jabatan' or status ='$status' and tipe='1'");}else{$query1 = mysql_query ("SELECT count(id) AS total_files FROM hrd_karyawan where tipe='1'");}$get	= mysql_fetch_assoc($query1);$jumlah = $get['total_files'];if (!isset ($_GET['offset'])) {	$offset = 0;}$limit	= 25;$ada 	= new paging ($limit);if($search){$query 	= $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan  WHERE nip like '%$search%' or nama like '%$search%'  and tipe='1' ORDER BY nama DESC LIMIT $offset,$limit" );}else if($agama or $pendidikan_terakhir or $jabatan or $status){$query 	= $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan  WHERE agama ='$agama' or pendidikan_terakhir ='$pendidikan_terakhir' or jabatan ='$jabatan' or status ='$status'  and tipe='1' ORDER BY nama DESC LIMIT $offset,$limit" );}else{$query 	= $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan  where tipe='1' ORDER BY nama DESC LIMIT $offset,$limit" );}if($offset){$no = $offset;}else{$no = 1;}while ($data = $koneksi_db->sql_fetchrow($query)) {$gambar = $data['foto'];$date2 = $data['tglditerima'];$date3 = date("Y-m-d");$tgllahir 	= datetimes($data['tgllahir'],False,False);$lamakerja =  floor(daysBetween($date2, $date3));$lamakerja2 = floor($lamakerja/365);$admin .='<tr><td class="text-center">'.$no.'</td><td><img src="mod/karyawan/images/normal/'.$gambar.'" alt="'.$nama.'" style="float:left; border:1px solid #dddddd; margin-right:10px; max-width:75px; max-height:75px;" /></td><td>'.$data['nip'].'</td><td>'.$data['nama'].'</td><td>'.$tgllahir.'</td><td>'.getagama($data['agama']).'</td><td>'.getpendidikan($data['pendidikan_terakhir']).'</td><td>'.getjabatan($data['jabatan']).'</td><td>'.getstatus($data['status']).'</td><td>'.$lamakerja2.' Tahun</td><td><a class="text-danger" href="admin.php?pilih=karyawan&amp;mod=yes&amp;aksi=hapus_karyawan&amp;id='.$data['id'].'"><span class="btn btn-danger">Hapus</span></a><a class="text-info" href="?pilih=karyawan&amp;mod=yes&amp;aksi=edit_karyawan&amp;id='.$data['id'].'"><span class="btn btn-warning">Edit</span></a><a class="text-info" href="?pilih=resign&amp;mod=yes&amp;aksi=add_resign&amp;id='.$data['id'].'"><span class="btn btn-info">Resign</span></a><a class="text-info" href="?pilih=karyawan&amp;mod=yes&amp;aksi=detail_karyawan&amp;id='.$data['id'].'"><span class="btn btn-success">Detail</span></a> </td></tr>';$no++;}$admin .= '</tbody></table>';if($jumlah>$limit){if (empty($_GET['offset']) and !isset ($_GET['offset'])) {	$offset = 0;}if (empty($_GET['pg']) and !isset ($_GET['pg'])) {	$pg = 1;}if (empty($_GET['stg']) and !isset ($_GET['stg'])) {	$stg = 1;}$admin .='<div class="border"><center>';$admin .= $ada-> getPaging($jumlah, $pg, $stg);$admin .='</center></div>';}}*/if($_GET['aksi']=="cari_karyawan"){$admin.='<h5>Data Karyawan Aktif</h5><table id="example"class="table table-striped table-bordered" cellspacing="0" width="100%"><thead><tr><th>NIP</th><th>Nama</th><th>TglLahir</th><th>Agama</th><th>Pendidikan</th><th>Jabatan</th><th>Status</th><th>Lama Kerja</th><th>Aksi</th></tr></thead>';$admin.='<tbody>';$hasil = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan where tipe='1'" );while ($data = $koneksi_db->sql_fetchrow($hasil)) { $nip=$data['nip'];$nama=$data['nama'];$gambar = $data['foto'];$date2 = $data['tglditerima'];$date3 = date("Y-m-d");$tgllahir 	= datetimes($data['tgllahir'],False,False);$lamakerja =  floor(daysBetween($date2, $date3));$lamakerja2 = floor($lamakerja/365);$admin.='<tr><td>'.$nip.'</td><td>'.$nama.'</td><td>'.$tgllahir.'</td><td>'.getagama($data['agama']).'</td><td>'.getpendidikan($data['pendidikan_terakhir']).'</td><td>'.getjabatan($data['jabatan']).'</td><td>'.getstatus($data['status']).'</td><td>'.$lamakerja2.' Tahun</td><td><a class="text-danger" href="admin.php?pilih=karyawan&amp;mod=yes&amp;aksi=hapus_karyawan&amp;id='.$data['id'].'"><span class="btn btn-danger">Hapus</span></a><a class="text-info" href="?pilih=karyawan&amp;mod=yes&amp;aksi=edit_karyawan&amp;id='.$data['id'].'"><span class="btn btn-warning">Edit</span></a><a class="text-info" href="?pilih=resign&amp;mod=yes&amp;aksi=add_resign&amp;id='.$data['id'].'"><span class="btn btn-info">Resign</span></a><a class="text-info" href="?pilih=karyawan&amp;mod=yes&amp;aksi=detail_karyawan&amp;id='.$data['id'].'"><span class="btn btn-success">Detail</span></a> </td>        </tr>';}   $admin.='</tbody></table>';}if($_GET['aksi']=="cari_ckaryawan"){$admin.='<h5>Data Calon Karyawan</h5><table id="example"class="table table-striped table-bordered" cellspacing="0" width="100%"><thead><tr><th>Tgl Melamar</th><th>Nama</th><th>TglLahir</th><th>JK</th><th>Agama</th><th>Pendidikan</th><th  width="20%">Aksi</th></tr></thead>';$admin.='<tbody>';$hasil = $koneksi_db->sql_query( "SELECT * FROM hrd_karyawan where tipe='0'" );while ($data = $koneksi_db->sql_fetchrow($hasil)) { $nip=$data['nip'];$nama=$data['nama'];$gambar = $data['foto'];$date2 = $data['tglditerima'];$date3 = date("Y-m-d");$tglmelamar 	= datetimes($data['tglmelamar'],False,False);$tgllahir 	= datetimes($data['tgllahir'],False,False);$lamakerja =  floor(daysBetween($date2, $date3));$lamakerja2 = floor($lamakerja/365);$admin.='<tr><td>'.$tglmelamar.'</td><td>'.$nama.'</td><td>'.$tgllahir.'</td><td>'.getkelamin($data['kelamin']).'</td><td>'.getagama($data['agama']).'</td><td>'.getpendidikan($data['pendidikan_terakhir']).'</td><td><a class="text-danger" href="admin.php?pilih=karyawan&amp;mod=yes&amp;aksi=hapus_karyawan&amp;id='.$data['id'].'"><span class="btn btn-danger">Hapus</span></a><a class="text-info" href="?pilih=karyawan&amp;mod=yes&amp;aksi=edit_karyawan&amp;id='.$data['id'].'"><span class="btn btn-warning">Terima</span></a><a class="text-info" href="?pilih=karyawan&amp;mod=yes&amp;aksi=detail_karyawan&amp;id='.$data['id'].'"><span class="btn btn-success">Detail</span></a> </td>        </tr>';}   $admin.='</tbody></table>';}if($_GET['aksi']=="rekap_karyawan"){$admin .= "* Apabila tidak dapat melakukan print, klik kanan pilih open link New Tab";$cetaklaporan = '<a href="cetak_karyawanrekap.php" target="new"onclick="return confirm(\'Apakah Anda Ingin Mencetak Rekap Karyawan ?\')" style="color:blue"><span class="btn btn-danger">Cetak Rekap Karyawan</span></a>';$admin .='<h5><b>Rekap Karyawan  '.$cetaklaporan.'</h5>';$admin .= '<table class="table table-striped table-hover"><thead><tr><th class="text-center">No</th><th>NIP</th><th>Nama</th><th>TglLahir</th><th>JK</th><th>Agama</th><th>Pendidikan</th><th>Jabatan</th><th>Status</th><th>Lama Kerja</th></tr></thead><tbody>';$no =1;$s = mysql_query ("SELECT * FROM hrd_karyawan  where tipe='1' ORDER BY nama");	while($data = mysql_fetch_array($s)){$date2 = $data['tglditerima'];$date3 = date("Y-m-d");$lamakerja =  floor(daysBetween($date2, $date3));$lamakerja2 = floor($lamakerja/365);$tgllahir 	= datetimes($data['tgllahir'],False,False);//$lamakerja2 = dateDifference($date2, $date3,'%y Tahun,%m Bulan');$urutan = $no + 1;$admin .= '<tr align="left"><td class="text-center">'.$no.'</td><td>'.$data['nip'].'</td><td>'.$data['nama'].'</td><td>'.$tgllahir.'</td><td>'.getkelamin($data['kelamin']).'</td><td>'.getagama($data['agama']).'</td><td>'.getpendidikan($data['pendidikan_terakhir']).'</td><td>'.getjabatan($data['jabatan']).'</td><td>'.getstatus($data['status']).'</td><td>'.$lamakerja2.' Tahun</td></tr>';$no++;}$admin .= '</table>';}echo $admin;?>